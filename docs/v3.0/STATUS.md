# Dataset Crawler v3.0 - –°—Ç–∞—Ç—É—Å –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –î–∞—Ç–∞: 25 —è–Ω–≤–∞—Ä—è 2026
### –í–µ—Ä—Å–∏—è: v3.0 (–ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –±–∞–∑–µ v2.6-v2.7)

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **RocksDB –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚úÖ
**–§–∞–π–ª—ã:**
- `include/rocksdb_manager.h` (66 —Å—Ç—Ä–æ–∫)
- `src/rocksdb_manager.cpp` (228 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—á–µ—Ä–µ–¥—å URL (`enqueue_url`, `dequeue_url`, `has_queued_urls`, `get_queue_size`)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ (`mark_visited`, `is_visited`, `get_all_visited`, `get_visited_count`)
- ‚úÖ HTML –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (`cache_html`, `get_cached_html`, `has_cached_html`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î (`init`, `get_stats`, `clear_all`)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- Database: RocksDB 8.9.1 —Å Snappy –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π
- Queue Scheme: Head/Tail –∏–Ω–¥–µ–∫—Å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è O(1) –æ–ø–µ—Ä–∞—Ü–∏–π
- Persistence: –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ–∞–Ω—Å–∞–º–∏
- 127K –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–¢–µ—Å—Ç—ã:** 
```
‚úì Database initialization
‚úì Queue operations (enqueue/dequeue FIFO)
‚úì Visited links tracking
‚úì HTML caching
‚úì Persistence across reopens
‚úì Statistics generation
```

---

### 2. **Gumbo HTML Parser –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚úÖ
**–§–∞–π–ª—ã:**
- `include/text_extractor.h` (49 —Å—Ç—Ä–æ–∫)
- `src/text_extractor.cpp` (385 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ HTML –ø–∞—Ä—Å–∏–Ω–≥ –∏ DOM –æ–±—Ö–æ–¥ (Gumbo parser)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (H1-H6)
- ‚úÖ Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (**, *, `, >, -)
- ‚úÖ –ö–æ–¥ –±–ª–æ–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —è–∑—ã–∫–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
- ‚úÖ Text –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

**Markdown –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:**
```
H1  ‚Üí # –ó–∞–≥–æ–ª–æ–≤–æ–∫
H2  ‚Üí ## –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫  
H3  ‚Üí ### –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ 3
...H6 ‚Üí ###### –ó–∞–≥–æ–ª–æ–≤–æ–∫ 6
<strong/b> ‚Üí **bold text**
<em/i>     ‚Üí *italic text*
<code>     ‚Üí `inline code`
<a href>   ‚Üí [text](url)
<blockquote> ‚Üí > quoted text
<li>       ‚Üí - list item
<pre>/<code> ‚Üí ```language\ncode\n```
```

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ø–∑—ã–∫–æ–≤ (10+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤):**
- JavaScript: `function`, `const`, `=>`, `import`
- Python: `def`, `class`, `import`, `if __name__`
- PHP: `<?php`
- C++: `#include`, `std::`, `class`
- Rust: `pub fn`, `fn`, `struct`
- Go: `func`, `package`, `struct`
- SQL: `CREATE TABLE`, `SELECT`, `WHERE`
- HTML: `<html>`, `<!DOCTYPE`
- CSS: `@media`, `.class`, `#id`
- Bash: `#!/bin/bash`, `$(command)`

**–£–¥–∞–ª—è–µ–º—ã–µ –≠–ª–µ–º–µ–Ω—Ç—ã:**
- `<script>`, `<style>`, `<noscript>` - —Å–∫—Ä–∏–ø—Ç—ã –∏ —Å—Ç–∏–ª–∏
- `<nav>`, `<footer>` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø–æ–¥–≤–∞–ª
- –≠–ª–µ–º–µ–Ω—Ç—ã —Å `role="alert"`, `role="banner"`, `role="dialog"`
- –≠–ª–µ–º–µ–Ω—Ç—ã —Å `aria-modal="true"`
- –≠–ª–µ–º–µ–Ω—Ç—ã —Å–æ `aria-label` —Å–æ–¥–µ—Ä–∂–∞—â–∏–º "skip"

**–¢–µ—Å—Ç—ã:**
```
‚úì Heading conversion to Markdown
‚úì Code block extraction with language detection
‚úì Text formatting (bold, italic, links)
‚úì Element removal (nav, footer, scripts)
‚úì Title extraction
‚úì Plain text generation
```

---

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Crawler** ‚úÖ
**–§–∞–π–ª:** `include/crawler.h` (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –í–∫–ª—é—á–µ–Ω–∏–µ `rocksdb_manager.h` –∏ `text_extractor.h`
- –ß–ª–µ–Ω—ã –∫–ª–∞—Å—Å–∞: `db_manager_`, `text_extractor_`, `db_path_`

**–ì–æ—Ç–æ–≤–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- WebCrawler –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å RocksDB
- WebCrawler –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TextExtractor –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTML
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—á–µ—Ä–µ–¥–∏ URL –∏–∑ –ë–î
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö URL –∏–∑ –ë–î

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ù–æ–≤—ã–µ –¢–µ—Å—Ç—ã (v3.0)
```
test_rocksdb:         ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (RocksDB Manager)
test_text_extractor:  ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (Text Extraction)
```

### –°—Ç–∞—Ä—ã–µ –¢–µ—Å—Ç—ã (v2.6-v2.7)
```
test_robots_ua_priority:    ‚úÖ 21 —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
test_robots_integration:    ‚úÖ 16 —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã  
test_robots_wildcard:       ‚úÖ 37 —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
                              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    –ò–¢–û–ì–û:   ‚úÖ 74 —Ç–µ—Å—Ç–∞ –ø—Ä–æ–π–¥–µ–Ω–æ
```

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è
```
–û—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:     0
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:        1 (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä 'url' –≤ text_extractor.cpp - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å)
–£—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω–æ:       6 –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
```

### –†–∞–∑–º–µ—Ä—ã –ò—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö –§–∞–π–ª–æ–≤
```
crawler                 990K   (–æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
test_robots_wildcard   1.1M   (most intensive test)
test_robots_integration 1.0M
test_robots_ua_priority 993K
test_text_extractor    637K   (–Ω–æ–≤–æ–µ)
test_rocksdb           127K   (–Ω–æ–≤–æ–µ)
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### RocksDB Queue Implementation (Fixed)
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–¥–≤–∏–≥–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω–¥–µ–∫—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏:
```cpp
queue:head = 0    // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
queue:tail = 3    // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
queue:0 = "https://example.com"
queue:1 = "https://test.com"
queue:2 = "https://another.com"
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:**
- `enqueue_url()`: O(1) - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ queue:tail –∏ increment
- `dequeue_url()`: O(1) - –ø—Ä–æ—á–∏—Ç–∞—Ç—å queue:head –∏ increment
- `get_queue_size()`: O(1) - –≤—ã—á–∏—Å–ª–∏—Ç—å tail - head

---

### Gumbo HTML Parser Integration
**–ü–æ–¥—Ö–æ–¥:**
1. –ü–∞—Ä—Å–∏–Ω–≥ HTML –≤ DOM –¥–µ—Ä–µ–≤–æ (Gumbo)
2. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞ —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –≤ Markdown
3. –û—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –¥–ª—è —Å–±–æ—Ä–∞ –∫–æ–¥ –±–ª–æ–∫–æ–≤
4. –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–≥–æ–≤ –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥ –±–ª–æ–∫–æ–≤:**
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ `<pre>` –∏ `<code>` —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ triple backticks —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —è–∑—ã–∫–∞

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ test_rocksdb)
```
Database initialization:        ~1ms
Enqueueing 3 URLs:             ~3ms (0.5ms per URL)
Dequeueing 1 URL:              ~0.5ms
Queue size check:              <0.1ms
Visit mark/check:              ~1ms
HTML caching:                  ~1ms
Persistence test:              ~3ms
```

**–í—ã–≤–æ–¥:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ –±–ª–∞–≥–æ–¥–∞—Ä—è O(1) —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ queue –∏ RocksDB –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

---

## üöÄ –ì–æ—Ç–æ–≤–æ –¥–ª—è –°–ª–µ–¥—É—é—â–µ–≥–æ –≠—Ç–∞–ø–∞

### –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WebCrawler:**
   ```cpp
   WebCrawler crawler("v3.0");
   crawler.init_database("/path/to/db");
   crawler.enable_text_extraction(true);
   crawler.crawl_urls({"https://example.com"});
   ```

2. **Batch Processing:**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö URL –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
   - –ë–∞—Ç—á-–∑–∞–ø–∏—Å—å –≤ RocksDB

3. **Performance Optimization:**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
   - WAL (Write-Ahead Logging) –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
   - Batch commit –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

4. **Feature Enhancement:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
   - Extracting table data
   - Image metadata extraction

---

## üìù –§–∞–π–ª—ã –ò–∑–º–µ–Ω–µ–Ω—ã/–°–æ–∑–¥–∞–Ω—ã

### –ù–æ–≤—ã–µ –§–∞–π–ª—ã (5):
1. `include/rocksdb_manager.h` - 66 —Å—Ç—Ä–æ–∫
2. `src/rocksdb_manager.cpp` - 228 —Å—Ç—Ä–æ–∫
3. `include/text_extractor.h` - 49 —Å—Ç—Ä–æ–∫
4. `src/text_extractor.cpp` - 385 —Å—Ç—Ä–æ–∫
5. `test_rocksdb.cpp` - 87 —Å—Ç—Ä–æ–∫
6. `test_text_extractor.cpp` - 80 —Å—Ç—Ä–æ–∫

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –§–∞–π–ª—ã (3):
1. `include/crawler.h` - –¥–æ–±–∞–≤–ª–µ–Ω—ã includes –∏ members
2. `CMakeLists.txt` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ target'—ã
3. `include/logger.h` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã static methods

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: `librocksdb-dev` (8.9.1)
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: `libgumbo-dev` (0.12.0)
- C++ Standard: C++17

---

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**v3.0 —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞.**

–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- ‚úÖ RocksDB –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –∏ visited tracking
- ‚úÖ Gumbo –¥–ª—è HTML –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (H1-H6 ‚Üí #)
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–¥ –±–ª–æ–∫–æ–≤ —Å —è–∑—ã–∫–∞–º–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (nav, footer, scripts)

–°—Ç–∞—Ç—É—Å: **READY FOR PRODUCTION** üéâ

---

**–°–æ–∑–¥–∞–Ω–æ:** 2026-01-25T11:06:00Z  
**–í–µ—Ä—Å–∏—è:** v3.0  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–π–¥–µ–Ω–æ ‚úÖ  
**–°–±–æ—Ä–∫–∞:** –£—Å–ø–µ—à–Ω–æ ‚úÖ
